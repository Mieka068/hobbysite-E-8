{% extends "base.html" %}

{% block title %}Applications for {{ job.role }}{% endblock %}

{% block content %}
<h1>Applications for {{ job.role }}</h1>

<p style="text-align: center;">
    <a href="{% url 'commissions:detail' job.commission.id %}" class="back-button">‚Üê Back to Commission</a>
</p>

<hr>

{% if applications %}
    {% for app in applications %}
        <div style="background-color: #ecf0f1; padding: 15px; border-radius: 5px; margin-bottom: 15px; border-left: 4px solid #3498db; display: flex; justify-content: space-between; align-items: center;">

            <!-- Applicant Name -->
            <p style="margin: 0; font-weight: bold;">{{ app.applicant.display_name }}</p>

            <!-- Status & Actions -->
            <div style="display: flex; align-items: center; gap: 10px;">

                {% if app.status == "Pending" %}
                    <span style="background-color: grey; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.9em;">Pending</span>

                    <a href="{% url 'commissions:accept_application' app.id %}" 
                       style="background-color: green; color: white; padding: 5px 10px; border-radius: 5px; text-decoration: none; font-size: 0.9em;">
                        Accept
                    </a>
                    <a href="{% url 'commissions:reject_application' app.id %}" 
                       style="background-color: red; color: white; padding: 5px 10px; border-radius: 5px; text-decoration: none; font-size: 0.9em;">
                        Reject
                    </a>

                {% elif app.status == "Accepted" %}
                    <span style="background-color: green; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.9em;">Accepted</span>

                {% else %}
                    <span style="background-color: red; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.9em;">Rejected</span>
                {% endif %}
            </div>

        </div>
    {% endfor %}
{% else %}
    <p style="text-align: center;">No applications yet.</p>
{% endif %}
{% endblock %}
